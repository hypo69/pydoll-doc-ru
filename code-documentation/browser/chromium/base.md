## Содержание

- [Модуль `pydoll.browser.chromium.base`](#модуль-pydollbrowserchromiumbase)
  - [Основные возможности](#основные-возможности)
  - [Класс `Browser`](#класс-browser)
    - [Методы](#методы)
      - [`__init__`](#__init__self-options_manager-connection_portnone)
      - [`async def start`](#async-def-startself-headlessfalse)
      - [`async def stop`](#async-def-stopself)
      - [`async def create_browser_context`](#async-def-create_browser_contextself-proxy_servernone-proxy_bypass_listnone)
      - [`async def new_tab`](#async-def-new_tabself-url-browser_context_idnone)
      - [`async def on`](#async-def-onself-event_name-callback-temporaryfalse)
    - [Абстрактные методы](#абстрактные-методы)
      - [`_get_default_binary_location`](#_get_default_binary_locationself)
  - [Пример использования](#пример-использования)

# Модуль `pydoll.browser.chromium.base`

Этот модуль представляет собой абстрактный базовый класс `Browser`, который обеспечивает основу для автоматизации браузеров на основе Chromium с использованием протокола Chrome DevTools Protocol (CDP). Он инкапсулирует низкоуровневое взаимодействие с CDP, предоставляя высокоуровневые методы для управления жизненным циклом браузера, контекстами, вкладками, файлами cookie и другими аспектами.

## Основные возможности

- **Управление жизненным циклом браузера**: запуск и остановка браузера, включая управление временными каталогами и процессами.
- **Управление контекстом браузера**: создание и удаление изолированных контекстов браузера (аналогично режиму инкогнито).
- **Управление вкладками**: создание новых вкладок, получение списка открытых вкладок и взаимодействие с ними.
- **Управление загрузками**: настройка пути загрузки и поведения при загрузке файлов.
- **Управление файлами cookie**: установка, получение и удаление файлов cookie.
- **Перехват сетевых запросов**: включение и отключение перехвата сетевых запросов, а также управление ими (продолжение, сбой, выполнение).
- **Управление разрешениями**: предоставление и сброс разрешений браузера (например, геолокация, уведомления).
- **Выполнение команд CDP**: отправка необработанных команд CDP и получение ответов.

## Класс `Browser`

Абстрактный базовый класс, который определяет основной интерфейс для автоматизации браузера.

### Методы

#### `__init__(self, options_manager, connection_port=None)`

Инициализирует экземпляр браузера с заданной конфигурацией.

- `options_manager`: менеджер, отвечающий за инициализацию и настройку параметров браузера.
- `connection_port`: порт для подключения к CDP. Если не указан, используется случайный порт.

#### `async def start(self, headless=False)`

Запускает процесс браузера и устанавливает соединение с CDP.

- `headless`: если `True`, запускает браузер в фоновом режиме.
- **Возвращает**: начальную вкладку для взаимодействия.

#### `async def stop(self)`

Останавливает процесс браузера и освобождает все ресурсы.

#### `async def create_browser_context(self, proxy_server=None, proxy_bypass_list=None)`

Создает новый изолированный контекст браузера.

- `proxy_server`: необязательный прокси-сервер для этого контекста.
- `proxy_bypass_list`: список хостов, которые должны обходить прокси.
- **Возвращает**: идентификатор контекста браузера.

#### `async def new_tab(self, url='', browser_context_id=None)`

Создает новую вкладку.

- `url`: начальный URL-адрес для открытия.
- `browser_context_id`: идентификатор контекста, в котором будет создана вкладка.
- **Возвращает**: экземпляр `Tab` для взаимодействия со страницей.

#### `async def on(self, event_name, callback, temporary=False)`

Регистрирует прослушиватель событий CDP на уровне браузера.

- `event_name`: имя события CDP (например, `"Network.responseReceived"`).
- `callback`: функция, которая будет вызвана при возникновении события.
- `temporary`: если `True`, обратный вызов будет удален после первого вызова.
- **Возвращает**: идентификатор обратного вызова для его возможного удаления.

### Абстрактные методы

#### `_get_default_binary_location(self)`

Должен быть реализован в подклассах для возврата пути к исполняемому файлу браузера по умолчанию.

## Пример использования

```python
import asyncio
from pydoll.browser.chromium import Chrome

async def main():
    browser = Chrome()
    await browser.start()
    tab = await browser.new_tab('https://example.com')
    # ... взаимодействие с вкладкой ...
    await browser.stop()

if __name__ == '__main__':
    asyncio.run(main())
```

Этот модуль является основой для создания конкретных реализаций браузеров, таких как `Chrome` и `Edge`, которые наследуются от `Browser` и предоставляют специфичные для каждого браузера реализации.